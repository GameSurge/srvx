commit 37b098bace1c6d45bedaf2ef6fbd52221c2fd5e3
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Jan 24 15:19:58 2007 -0500

    Delete ChangeLog file

commit 4d4aa002d0e641a43b8dcaece710894947d84e7e
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Jan 24 11:05:34 2007 -0500

    Remove .cvsignore files; replace with .gitignore as needed.
    Remove rx/Makefile.in, since there is a Makefile.am there.
    Update src/Makefile.am and src/modcmd.c to work with git.

commit 6c1ba8cdc4779d18d14ed6dcc9dd7eface05bff1
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jan 23 21:57:48 2007 -0500

    Delete binary files that were committed (by git archimport?) and more
    Arch droppings.

commit 0fd59d3b61448f470ffbfc742950f4d8a6f7b0b9
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jan 23 21:37:09 2007 -0500

    Delete {arch} directory since git does not use it.

commit 5860e060e33702d632c8dff18b118b67df2ba20f
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jan 23 21:36:42 2007 -0500

    Delete {arch} directory since git does not use it.

commit 7715c282976538be10735cf3f5a1a6cbf7040e6b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Jan 8 04:27:45 2007 +0000

    Avoid epoll_ctl(..., EPOLL_CTL_DEL, ...) for closed fds.
    
    src/ioset-impl.h (struct io_engine): Add "os_closed" parameter to
        remove() method.
    
    src/ioset.c (ioset_close): Add this to the call.
    
    src/ioset-epoll.c (ioset_epoll_remove): Use it to avoid removing the fd
        from epoll_fd, since that epoll_ctl() call will always fail.
    
    src/ioset-select.c (ioset_select_remove): Ignore the new parameter.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-81

commit a48c3eda6622542d11bb128cdeacf7609dd0a638
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Jan 8 04:22:20 2007 +0000

    Skip reporting mondo db sections in ?stats databases.
    
    src/saxdb.c (cmd_stats_databases): Only show entries for databases that
        have their own file; skip sections of "mondo".
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-80

commit ffb6fc563e5477eb772125e96b8591d0d53a7d63
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Jan 8 04:11:56 2007 +0000

    Fix SourceForge bug #1629748
    
    src/chanserv.c (cmd_adduser): Include suspended users in check for
        pre-existing channel access for the user being added.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-79

commit f70d5f8b1206f535b0827a6c5071a128ec000f2b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Dec 23 05:50:25 2006 +0000

    Allow last account mask to be deleted with odelmask.
    
    src/nickserv.c (nickserv_delmask): Add parameter to distinguish between
        normal and override use.
      (cmd_delmask): Pass the new argument.
      (cmd_odelmask): Likewise.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-78

commit 4fb051069c4fe7f17409268fb654fec05c8c9abd
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Dec 23 05:40:12 2006 +0000

    Properly handle overrides in !wipeinfo.
    
    src/chanserv.c (cmd_wipeinfo): Allow real_actor to be null.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-77

commit 3c0697e41cec0e8ca5291a85df2b014143c4c472
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Dec 23 05:38:37 2006 +0000

    Revert miscommitted file from patch-73.
    
    src/proto-common.c: Revert accidentally committed patch.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-76

commit 7ff7c2c44226f5ed774451e187e3d40fa2fc3db4
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Dec 23 05:37:07 2006 +0000

    Allow extra arguments to privmsg and notice.
    
    src/proto-p10.c (cmd_privmsg): Allow extra arguments between target and
        text.
      (cmd_notice): Likewise.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-75

commit 269a530d9562cc5b6d3527bdc67945c23ab568be
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Dec 23 05:35:29 2006 +0000

    Fix typo in "gtrace criteria" help entry.
    
    src/opserv.help (gtrace criteria): Fix capitalization of $b tag.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-74

commit 19d17b0f20c491474e12276c64cfad174d8d7b31
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Dec 23 05:33:28 2006 +0000

    Fix typo in "gtrace criteria" help entry.
    
    src/opserv.help (gtrace criteria): Fix capitalization of $b tag.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-73

commit ca8700584db213d03384f9658f480f7ae21372c4
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Dec 23 05:31:56 2006 +0000

    Allow NickServ to learn hostmasks automatically.
    
    src/nickserv.c (nickserv_addmask): Declare early.
      (cmd_oregister): Allow oper to omit fourth parameter, to set no
        hostmask.
      (cmd_auth): On success, add user's hostmask if the account's hostmask
        list is empty.
      (cmd_cookie): Append hostmask to account on successful allowauth.
      (init_nickserv): Update merge command access.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-72

commit d41d408a3139882f91811d513a4399c8cb4a99d7
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Dec 23 05:27:23 2006 +0000

    Update PostgreSQL patch schema.
    
    patches/log-pgsql.txt: Update to include HelpServ tables.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-71

commit 4cde159fd006d1eda06047423c23de46bb639207
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Dec 23 05:11:47 2006 +0000

    Fix typo in MODE_APASS generation.
    
    src/proto-p10.c (mod_chanmode_announce): Fix typo.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-70

commit 2136e4fcdbecc59e3faf3d38c385a5a348499578
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 27 01:59:57 2006 +0000

    Don't re-allocated a language that already exists.
    
    src/helpfile.c (language_read_list): If the language already exists, do
        not allocate it anew.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-69

commit a08eba88a45467c1b0953230715048eca7b08bda
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 27 01:25:18 2006 +0000

    Remove ioset engine update call that could read after free().
    
    src/ioset.c (ioset_connect): If the connect fails immediately, do not try
        to update the fd after closing it.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-68

commit 7c51712fcbe06b6a09c68ff7db4d7d54552a9da5
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 27 01:06:02 2006 +0000

    Allow languages/strings.db to override builtin strings.
    
    src/helpfile.c (language_read): Add space before "parent".
      (language_read_list): Explicitly skip the file named "strings.db".
      (helpfile_read_languages): New function.
      (helpfile_finalize): Register it as a conf-reload function.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-67

commit e0d37fc01c75fe9bc1d54fbbdfa505be851a74c8
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 27 00:47:30 2006 +0000

    Support +I while we're adding modes (part 2) - the missing files.
    
    src/opserv.c (cmd_whois): Test no-idle mode.
    
    src/proto-p10.c (irc_user): Check for no-idle mode.
      (mod_usermode): Check for +I flag.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-66

commit c04c27291b23ffd95f5e9b1dd1747d9c50e33205
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 27 00:44:35 2006 +0000

    Support +I while we're adding modes..
    
    src/hash.c (FLAGS_NOIDLE): New macro for +I (hide idle time) mode.
       (IsNoIdle): New macro to test it.
    
    src/opserv.c (cmd_whois): Test no-idle mode.
    
    src/proto-p10.c (irc_user): Check for no-idle mode.
      (mod_usermode): Check for +I flag.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-65

commit 39c5f387cbe39df6c00cf2d8102abdbc24af1b8e
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 27 00:35:00 2006 +0000

    Make maintainer-mode use C89 mode.
    
    configure.in (CFLAGS): Use -ansi in maintainer mode.
      (AC_C_INLINE): Test after setting -Werror.
    
    src/chanserv.c (cmd_adduser): Fix comment formatting.
      (cmd_clvl): Likewise.
      (cmd_deluser): Likewise.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-64

commit a52ef5a46add4c01bd4563fc805fb9395707e844
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 27 00:21:32 2006 +0000

    Pull ThiefMaster's patch-3..5.
    
    Patches applied:
    
     * thiefmaster@gamesurge.net--2006/srvx--devo--1.3--base-0
       tag of srvx@srvx.net--2006/srvx--devo--1.3--patch-58
    
     * thiefmaster@gamesurge.net--2006/srvx--devo--1.3--patch-3
       Implement complete remote whois.
    
     * thiefmaster@gamesurge.net--2006/srvx--devo--1.3--patch-4
       Improve override logging and ignore godmode in !trim.
    
     * thiefmaster@gamesurge.net--2006/srvx--devo--1.3--patch-5
       Announce ounregisters to staff via Global.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-63

commit cc446ce441a08a8c2737c8bb8e073c37cfd724c4
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Oct 26 23:44:10 2006 +0000

    Allow 900+ users to get full accountinfo.
    
    src/nickserv.c (cmd_handleinfo): Check for opserv access before checking
        for an outranked oper.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-62

commit 62778e8e7aca27ee23170f0e11cc875c3052edc3
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Oct 26 23:41:14 2006 +0000

    Fix irc_pton() sense for hostscan command.
    
    src/mod-sockcheck.c (cmd_hostscan): Fix test for irc_pton() return value.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-61

commit 9d4c1d694d7102298670a519bb255b92b2cd8680
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Oct 21 16:06:47 2006 +0000

    Various I/O cleanups and fixes.
    
    src/ioset.c (ioset_add): Set FD_CLOEXEC flag on all managed sockets.
      (ioset_try_write): Tidy formatting.
      (ioset_close): Add another bit to "os_close".
    
    src/proto-common.c (close_socket): Pass the new bit to ioset_close().
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-60

commit ac0c9ec508015c5663f3297883ba1ff4c4ddde7f
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Oct 21 16:04:19 2006 +0000

    Add 'tell' command; update copyright message.
    
    src/modcmd.c (cmd_version): Update copyright years.  Move the multi-line
        credits to a separate message and make it actually send properly.
      (cmd_tell): New command.
      (modcmd_init): Register cmd_tell.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-59

commit 6e9ec863cf7ea7fc05abfaa6240e08622e015eea
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Oct 7 00:03:52 2006 +0000

    Fix a (tiny) memory leak in mod-sockcheck.c.
    
    src/mod-sockcheck.c (sockcheck_begin_test): Make io_fd assignment
        clearer.
      (sockcheck_read_conf): Free the addrinfo we get.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-58

commit 1eb2c458869911665d9604c38a3b4de2dc0b42fc
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 6 23:18:58 2006 +0000

    Fix sending P10 bursts with many bans.
    
    src/proto-p10.c (irc_burst): Only send modes and user list once.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-57

commit 798a6ca2695635ebe92b93994f116d36444d51a1
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 6 23:16:58 2006 +0000

    Remove "wants_reads" field from struct io_fd.
    
    Everybody wants read information, so give it to them!
    
    src/ioset-epoll.c (ioset_epoll_events): Make EPOLLIN unconditional.
    
    src/ioset-impl.h (fd_wants_reads): Delete.
    
    src/ioset-select.c (ioset_select_loop): Unconditionally set read bit for fd.
    
    src/ioset.c (ioset_add): Add fd to engine after marking it non-blocking.
      (ioset_buffered_reads): Remove check for fd->wants_reads.
    
    src/ioset.h (struct io_fd): Delete "wants_reads" field.
    
    src/mod-qserver.c (qserver_readable): Add missing newline.
      (qserver_accept): Delete assignment to fd->wants_reads.
    
    src/mod-sockcheck.c (sockcheck_connected): Delete assignment to
        fd->wants_reads.
    
    src/proto-common.c (create_socket_client): Delete assignment to
        fd->wants_reads.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-56

commit 69ae3f11677f9c9a3cde701d2d8e97b5d102a14b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 6 23:12:20 2006 +0000

    Fix detection of gettimeofday().
    
    configure.in: Since we have a fallback for gettimeofday, move it in with
        the functions for which we do.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-55

commit 5a1442449d679c8bbbeaddb3ae509ec925d1a92a
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Oct 4 01:41:05 2006 +0000

    Make timeq_init() automatic.
    
    src/main.c (main): Remove call to timeq_init().
    
    src/timeq.h (timeq_init): Remove declaration.
    
    src/timeq.c (timeq_cleanup): Assign NULL to timeq to handle late timeq_del() calls.
      (timeq_init): Make static.
      (timeq_next): If timeq is NULL, return a large positive number.
      (timeq_add): If timeq is NULL, initialize it.
      (timeq_del): If timeq is NULL, do nothing.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-54

commit 0e4826033afe95bdc598cf00d91d3004c712b6aa
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Oct 4 01:37:40 2006 +0000

    Allow log_module() to NULL log types.
    
    src/log.c (log_module): To make cleanup easier, allow NULL log types.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-53

commit c59bb1110a73a8505a67136e170db927984c42df
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Oct 4 01:32:57 2006 +0000

    Fix some startup-related glitches.
    
    src/ioset.h (ioset_update): Declare new function.
    
    src/ioset.c (ioset_init): If we have an engine, return early.
      (ioset_add): If no engine, try to initialize.
      (ioset_update): New function.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-52

commit 0937f96a00e5f5166b60af3d9e19d70315987258
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Oct 4 01:23:10 2006 +0000

    Update time for ioset backend.
    
    src/ioset-epoll.c (ioset_epoll_loop): Set now after epoll_wait() returns.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-51

commit 147726624b908beb37d4b36c53cfe6ae3feb2c8e
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Oct 3 23:18:25 2006 +0000

    I18n'ize the staff descriptors in !access.
    
    src/chanserv.c (msgtab): Add new entries for staff descriptors.
      (cmd_access): Use them.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-50

commit 4a9e8ee2703aae171737b426b966ee1e8f8fbf8b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Sep 23 01:14:35 2006 +0000

    ioset event handling fixups
    
    src/ioset.c (ioset_connect): Properly handle the situation if the connect
        handler closes the fd.
      (ioset_accept): Rename "old_active_fd" to "old_active" for consistency.
      (ioset_buffered_read): Make sure we bail if the fd is closed.
      (ioset_events): Handle 'readable' on a connecting fd as an error.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-49

commit e601c8e220ed5dd300e4a36c447ec26d6afb4586
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Sep 23 01:03:08 2006 +0000

    Dummy handling fixes.
    
    src/proto-p10.c (irc_notice): Fix the conditions for sending message to
        IRC.
      (irc_privmsg): Likewise.
      (parse_cleanup): Zero num_*_funcs when freeing the corresponding
        arrays, so that DelUser() doesn't read after free.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-48

commit 535acb0e7bab910aea29e108fe68aa0feb7402e8
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Sep 23 00:58:27 2006 +0000

    Fix hostmask generation for hostnames without dots.
    
    src/proto-common.c (generate_hostmask): Keep no-dot hostnames as the
        mask -- mod-qserver can generate hostnames like "localhost".
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-47

commit a9efbf02aa905a102a8f57e931b845b70344355e
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Sep 23 00:55:02 2006 +0000

    Default qserver clients to being opers.
    
    src/mod-qserver.c (qserver_accept): Default dummy client to having
        usermode +o, so they can use privileged services.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-46

commit a7804b1c5c9d21a7b1147022f76bbc7d73e54e20
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Sep 23 00:52:48 2006 +0000

    Further giveownership confirmation fixes.
    
    src/chanserv.c (CSMSG_CONFIRM_GIVEOWNERSHIP): Prepend * to account name.
      (cmd_giveownership): Check invoker access to determine need for confirmation.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-45

commit 678f3ef5bcfc602c15a587af423939e4e4b78531
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 03:33:25 2006 +0000

    Fix comment about +O vs +o.
    
    src/hash.h (FLAGS_OPER): The user mode is actually +o, not +O.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-44

commit 68dcaba7b0902abd71a03a498ce4290c0df6ade8
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 03:28:08 2006 +0000

    Fix license notice for mod-qserver.c
    
    src/mod-qserver.c: Since this was for public distribution, use the
        standard GPL header notice.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-43

commit 1b714b8a29f4c15b961e75bc81f839c9da4c4867
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 03:05:54 2006 +0000

    Add win32 specific files to tarballs.
    
    Makefile.am (EXTRA_DIST): Include Makefile.win32.
    
    src/Makefile.am (EXTRA_srvx_SOURCES): Include config.h.win32 and ioset-win32.c.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-42

commit 7563063f62a605fb0866779f61186694c3a8b7d7
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 03:02:07 2006 +0000

    First pass at native Win32 support (does not compile).
    
    src/compat.h: Handle Windows Sockets 2 headers.
    
    src/mod-memoserv.c (KEY_READ): #undef'ine to avoid its registry access
        meaning on Windows.
    
    Makefile.win32: New Makefile for native or cross builds targeting Win32.
    
    src/config.h.win32: Pregenerated config.h for Win32.
    
    src/ioset-win32.c: First attempt at a Win32 ioset backend.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-41

commit f5ceaeaa660c3fcda2178d8cced765407a9a2998
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 02:51:50 2006 +0000

    Add direct query server module.
    
    srvx.conf.example: Document qserver configuration.
    
    src/Makefile.am (EXTRA_srvx_SOURCES): Add mod-qserver.c.
    
    src/mod-qserver.c: New file.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-40

commit f2eb30a6fb98a10a5b3aa019a4e7a186ae482f23
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 02:45:20 2006 +0000

    Add epoll_* ioset backend.
    
    configure.in: Check for epoll_create(); demote select() from being required.
    
    src/Makefile.am (EXTRA_srvx_SOURCES): Add ioset-epoll.c.
    
    src/ioset-epoll.c: New file.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-39

commit 9beaf5cb86171f4550abaaf62e33a5f9d6a96f61
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 02:38:21 2006 +0000

    Allow multiple ioset backends.
    
    configure.in: Add framework to check for ioset backends.
    
    src/Makefile.am (noinst_DATA): Reorganize for easier patching.
      (checkversion): Avoid spurious error message if $(GNU_ARCH) is missing.
      (EXTRA_srvx_SOURCES): Reorganize for easier patching; add ioset-select.c.
      (srvx_SOURCES): Add ioset-impl.h.
    
    src/ioset.c (ioset.h): #include "ioset-impl.h" instead.
      (clock_skew): Make non-static for backends.
      (engine): New variable.
      (active_fd): New variable (kind of kludgy).
      (io_engine_*): New variables, only one exists so far.
      (ioset_init): New function.
      (ioset_cleanup): Call engine's cleanup function.
      (ioset_add): Call engine's add function.
      (ioset_listen): New function.
      (ioset_connect): Call engine's update functions at appropriate points.
      (ioset_try_write): Call engine's update function on success.
      (ioset_close): Change signature; check against active_fd; call engine's
        remove function.
      (ioset_accept): New function.
      (ioset_buffered_read): Update fd->state instead of fd->eof and call
        engine's update function as appropriate.  Use active_fd.
      (ioset_line_read): Check fd->state instead of fd->eof.
      (debug_fdsets): Move to ioset-select.c.
      (ioset_events): New function.
      (ioset_run): Move most of the logic into ioset-select loop function;
        call it.  Rename "select_timeout" to "timeout" to match.
      (ioset_write): Call engine->update function.
      (ioset_printf): New function.
    
    src/ioset.h (common.h): #include this header to get PRINTF_LIKE macro.
      (struct io_fd): Replace 'connected' and 'eof' fields with 'state' field.
      (ioset_init): Declare new function.
      (ioset_listen): Declare new function.
      (ioset_printf): Declare new function.
      (ioset_close): Update signature.
    
    src/main.c (main): Call ioset_init().
    
    src/mod-sockcheck.c (sockcheck_free_client): Can unconditionally call
        ioset_close() now.
      (expand_var): Always use C99 type names.
      (sockcheck_begin_test): Can unconditionally call ioset_close() now.
      (sockcheck_read_conf): Only warn about unknown host if the user set
        one; it is silly to arn about unknown host `(null)'.
    
    src/proto-common.c (socket_destroyed): Check fd->state rather than
        fd->eof.
      (close_socket): Update signature for ioset_close().
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-38

commit bb8df889b217613d277faed6683abe6e738c274a
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 02:15:55 2006 +0000

    Add "dummy client" support.
    
    src/hash.h (FLAGS_DUMMY): New flag for non-propagated clients.
      (IsDummy): Check it.
    
    src/helpfile.c (send_message): Allow sending to dummy clients.
      (send_message_type): Likewise.
    
    src/proto-bahamut.c (irc_user): Bail if user is NULL or has a dummy nickname.
      (deliver_to_dummy): New function.
      (irc_privmsg): Try to deliver via dummy method before sending to IRC.
      (irc_notice): Likewise.
      (irc_notice_user): Likewise.
      (AddUser): If the first user mode character is '*', mark as a dummy.
      (DelUser): Unregister callback functions when destroying local clients.
    
    src/proto-p10.c (irc_user): Bail if user is NULL or has a dummy nickname.
      (deliver_to_dummy): New function.
      (irc_notice): Try to deliver via dummy method before sending to IRC.
      (irc_notice_user): Likewise.
      (irc_privmsg): Likewise.
      (AddUser): If the first user mode character is '*', mark as a dummy.
      (DelUser): Unregister callback functions when destroying local clients.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-37

commit c290f4aba87163226911be6cd024b69fc64d8ca3
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 01:56:07 2006 +0000

    Delete obsolete and non-propagated user modes.
    
    src/hash.h (FLAGS_LOCOP): Delete.
      (FLAGS_SERVNOTICE): Delete.
      (FLAGS_HELPER): Delete.
      (IsServNotice): Delete.
      (IsHelperIrcu): Delete.
    
    src/opserv.c (cmd_whois): Remove IsServNotice() or IsHelperIrcu().
    
    src/proto-bahamut.c (mod_usermode): Do not handle +O/+s/+h, we never see them.
    
    src/proto-p10.c (irc_user): Do not emit +s or +h, we never set them..
      (mod_usermode): Do not handle +O/+s/+h, we never see them.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-36

commit 529b86827d08cc893ef7c0d2c2c705d9a48b4007
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 01:48:00 2006 +0000

    Merge AddService(), AddClone() into AddLocalUser()
    
    src/chanserv.c (init_chanserv): Convert AddService() call to AddLocalUser().
    
    src/global.c (init_global): Likewise.
    
    src/mod-helpserv.c (register_helpserv): Likewise.
    
    src/modcmd.c (cmd_service_add): Likewise.
      (modcmd_load_bots): Likewise.
    
    src/nickserv.c (regex.h): Fall back to rxposix.h from local rx package.
      (init_nickserv): Convert AddService() call to AddLocalUser().
    
    src/opserv.c (opserv_add_reserve): Convert AddClone() call to AddLocalUser().
      (cmd_clone): Likewise.
      (add_reserved): Likewise.
      (init_opserv): Convert AddService() call to AddLocalUser().
    
    src/proto-bahamut.c (AddService): Convert into AddLocalUser().
      (AddClone): Delete.
    
    src/proto-p10.c (AddService): Convert into AddLocalUser().
      (AddClone): Delete.
    
    src/proto.h (AddService): Convert into AddLocalUser().
      (AddClone): Delete.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-35

commit 991dbc082cace305b4adb5512f56fd56b1bb8f46
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 01:35:03 2006 +0000

    Make IRC message handler 'text' const.
    
    src/chanserv.c (chanserv_ctcp_check): Make 'text' parameter const.
    
    src/mod-helpserv.c (helpserv_usermsg): Likewise.
      (helpserv_botmsg): Likewise.
    
    src/modcmd.c (svccmd_invoke): Likewise.
      (modcmd_privmsg): Likewise.
      (modcmd_chanmsg): Likewise.
    
    src/modcmd.h (SVCMSG_HOOK): Likewise.
    
    src/proto.h (chanmsg_func_t): Likewise.
      (privmsg_func_t): Likewise.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-34

commit e07f02665b012234cd27d848e2b96ecac18448a4
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Sep 22 01:23:43 2006 +0000

    Add autogen.sh to distribution tarball.
    
    Makefile.am: Add autogen.sh to the "extra" distributed files.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-33

commit d5ce9a31097a359fd1aa205180db41d1e82a46d8
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Sep 11 01:03:14 2006 +0000

    Support and use G-line lastmod timestamp.
    
    src/gline.c (KEY_LASTMOD): New key string.
      (gline_add): Use new parameter to set lastmod.
      (gline_add_record): Look for KEY_LASTMOD values.
      (gline_write_entry): Set KEY_LASTMOD if lastmod is set.
      (gline_discrim_create): Allow specification of lastmod criteria.
      (gline_discrim_match): Check lastmod if appropriate.
    
    src/gline.h (struct gline): Add lastmod field.
      (struct gline_discrim): Add lastmod fields.
      (gline_add): New parameter.
    
    src/mod-sockcheck.c (sockcheck_issue_gline): Set lastmod.
    
    src/opserv.c (OSMSG_NO_GLINE): New format string.
      (opserv_block): Set lastmod.
      (cmd_gline): Set lastmod.
      (cmd_stats_glines): Allow searching for a particular G-line (just like
        gtrace).
      (opserv_new_user_check): Set lastmod.
      (gtrace_print_func): Use intervals rather than fixed dates and show
        lastmod.
    
    src/opserv.help (GTRACE CRITERIA): Mention lastmod criteria.
    
    src/proto-p10.c (irc_gline): Send lastmod if it is set.
      (cmd_num_gline): Parse out lastmod if it is set.
      (cmd_gline): Parse out lastmod if it is set.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-32

commit f77ebba60437305930ce17494d4f5dcb582c9640
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Sep 9 21:37:28 2006 +0000

    Network event handler fixup when ChanServ is disabled.
    
    src/chanserv.c (init_chanserv): Do not register network event handlers if
        ChanServ is disabled.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-31

commit 4865c7364205a42abc5bc30e79e900c889a77f35
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun Sep 3 15:24:48 2006 +0000

    Make srvx compile on cygwin again.
    
    configure.in (AC_CHECK_HEADERS): Look for <arpa/inet.h>.
      (AC_CHECK_FUNCS): Look for inet_aton().
    
    src/compat.c: Try to include <arpa/inet.h> so we get inet_addr().
      (getaddrinfo): If inet_aton() is not provided, use inet_addr() instead.
    
    src/compat.h (AI_NUMERICHOST): Define this too.
    
    src/tools.c (irc_pton): Use the pedantically correct type for ip4.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-30

commit feef0f6eb3185bab2030b0a6021f989f39a081ec
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun Sep 3 15:21:10 2006 +0000

    DelChannelUser call and semantic fixups
    
    src/hash.c (DelChannel): Fix type of 'reason' arg to DelChannelUser().
      (DelChannelUser): Only send part message if user is local.
    
    src/proto-bahamut.c (DelUser): Unswap arguments to DelChannelUser().
      (cmd_part): Move to proto-common.c.
    
    src/proto-common.c (part_desc): New structure type.
      (part_helper): Use it to capture user and reason.
      (cmd_part): New common function.
    
    src/proto-p10.c (cmd_part): Move to proto-common.c.
      (DelUser): Unswap arguments to DelChannelUser().
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-29

commit a8e70fed2b603588e97a24834731e5b0c5183dad
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun Sep 3 15:17:05 2006 +0000

    Do not try to moderate join-flood channels with no OpServ.
    
    src/opserv.c (opserv_join_check): As feigling points out, it is bad for a
        service that does not exist to join a channel and hack modes.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-28

commit a669046fc8d9cd4ae0020ba7aeac8dc678235aa9
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun Sep 3 15:13:31 2006 +0000

    Fix ounregnick access check.
    
    src/nickserv.c (cmd_ounregnick): Use the standard rank-checking function.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-27

commit 27ce00b3f3874fcad5d991fc6de0bd78fdc3ae47
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun Sep 3 15:11:29 2006 +0000

    Fix giveownership to how it should be
    
    src/chanserv.c (cmd_giveownership): Only require confirmation code if the
      user has real (normal) access and is not forcing the giveownership.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-26

commit 54aa9e8b76fcca9e1699415d238c62d665414904
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun Sep 3 15:10:58 2006 +0000

    Fix giveownership to how it should be
    
    src/chanserv.c (cmd_giveownership): Only require confirmation code if the
      user has real (normal) access and is not forcing the giveownership.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-25

commit b0588880d23f40dd2174080054e1884297f9f417
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Aug 19 13:31:08 2006 +0000

    Mark channels as visited when high-level users leave.
    
    src/chanserv.c (handle_part): At ThiefMaster's suggestion, update a
      channel's visited time when a high-level user leaves (parts, gets
      kicked, or quits).
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-24

commit f77ad7aef9d93f6edd540881c08007589aec5921
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Aug 7 03:11:10 2006 +0000

    Require confirmation cookie for giveownership.
    
    src/chanserv.c (CSMSG_CONFIRM_GIVEOWNERSHIP): New translation string.
      (cmd_giveownership): Fail for non-force unconfirmed giveownerships.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-23

commit 78be64e73891bb448b20a09dad5062ba95abe320
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Jul 29 01:36:39 2006 +0000

    Add CSMSG_INVALID_CFLAG string.
    
    src/chanserv.c (msgtab): Add entry for "CSMSG_INVALID_CFLAG".
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-22

commit e01e4fd9accfd4d6ce108d9f3f72dc84e6455f4e
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Jul 29 01:34:17 2006 +0000

    Fix ?csearch max timestamp default value.
    
    src/opserv.c (opserv_cdiscrim_create): Fix default value for max_ts.
        (With an expression only a coder could love.  Improvements wanted.)
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-21

commit 192935bfbf51c267a6e4e1c836309809ef86dade
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jul 18 03:13:31 2006 +0000

    Update arch-inventory files for in-tree builds.
    
    .arch-inventory: Add "libtool" as a preserved file.
    
    src/.arch-inventory: Add ".libs" as a preserved directory.  Put a \
        before the . in .cvsignore to avoid capturing too much.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-20

commit 6b5eb873a3bc74567f734dec958bd131651d80ff
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jul 18 02:48:32 2006 +0000

    Make !bans searching more flexible
    
    src/chanserv.c (cmd_bans): Allow specifying a complete hostmask or a
        nickname when searching bans.
    
    src/chanserv.help (BANS): Document the searching functions.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-19

commit a7c650db8b7febf9415cc0f07280675cd8ec3098
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jul 18 01:49:56 2006 +0000

    Simplify cdiscrim_match() max tests.
    
    src/opserv.c (opserv_cdiscrim_create): Explicitly initialize max_users
        and max_ts.
      (cdiscrim_match): Simplify the bounds tests for timestamp and users.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-18

commit 79a511c977bdf00b44e0ede881cbf5f2e3aa0ed3
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jul 18 01:46:10 2006 +0000

    Fix reclaim KILL behavior.
    
    src/nickserv.c (nickserv_reclaim): Use DelUser() instead of irc_kill(),
        so that srvx's databases are appropriately updated.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-17

commit a6980673b5e7e578a61a619f50e381f7ada14602
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jul 18 01:12:16 2006 +0000

    Fix typo in English error message text.
    
    src/chanserv.c (CSMSG_TOPICMASK_CONFLICT2): Add missing "is".  Reported
      by Harm, by way of Byte.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-16

commit b028fa011ac91b92386b0b2c1166f1d2e5baf73d
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun May 14 02:54:24 2006 +0000

    Update version tag for 1.3.1 release.
    
    configure.in: Update version tag for 1.3.1 release.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-15

commit 6a81645957e1d6452ea973d8607fc989d0a6fb74
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue May 2 02:46:39 2006 +0000

    Make some ChanServ ban checks see through hidden hosts.
    
    src/chanserv.c (handle_join): Make this function see through hidden
        hosts when matching users against bans.  Add comment before the
        non-burst section; remove a redundant burst check there.
      (handle_auth): See through hidden hosts when checking against active
        bans.  Inactive ban check keeps MATCH_VISIBLE since bans on the true
        hostname should have already been applied.
      (handle_nick_change): Same as handle_auth.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-14

commit 3a4312a5708c1907fa90a6c5ff1bd5bf75b88962
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Apr 29 03:11:35 2006 +0000

    Fix visible matching for fake and +x-hidden hosts.
    
    src/tools.c (user_matches_glob): Use correct test to determine whether
        the user's host is hidden.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-13

commit 49343f3d285d976c13be1860127c42e91c362285
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Apr 7 00:56:38 2006 +0000

    Fix a +o mode parsing error.
    
    src/proto-p10.c (mod_chanmode_parse): Check that the input argument after
        +o is a valid one.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-12

commit 96a6a8025c3f63da968a6abf146daee1898bcf5d
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Apr 6 02:19:47 2006 +0000

    Fix some IPv6 address compatibility issues.
    
    src/proto-p10.c (irc_p10_pton): Mark valid IPv4 addresses as v4-mapped.
      (irc_p10_ntop): Emit invalid IPs as AAAAAA (but it could be _ for +6
        flagged hubs).
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-11

commit 6388d4198f9af61b9b2c874b4762b69dbb115cc6
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 5 02:07:30 2006 +0000

    Fix a possible warning without debugging.
    
    src/alloc-slab.c (slab_unalloc): If assert() is #define'd to be empty,
        then size is unused.  Include a (void)size to quash a warning.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-10

commit f7ece5521d4dae21b8ed35bd769b579c01a54455
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 5 02:02:21 2006 +0000

    Fix hostmask error from last year's patch-28.
    
    src/proto-common.c (generate_hostmask): When generating a strict hostmask
        not by IP, we should keep the original hostname.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-9

commit 0fdbd14f410ac855b32a0b098843b2d8973fab59
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 5 01:59:54 2006 +0000

    Fix compilation error with slab allocator and no debugging.
    
    src/alloc-slab.c (verify): Undefine as a macro before defining as a
        function.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-8

commit 10b1e2e11e5810b8b23d039a74696b024c58fee3
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 5 00:24:50 2006 +0000

    Fix backtracking bug after an escaped character.
    
    src/tools.c (match_ircglob): Fix backtracking behavior when an escaped
        character did not match.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-7

commit fdfcdd4466566ede6d4e371df09a950b906c92f5
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 5 00:11:31 2006 +0000

    Advise the kernel that we will scan DB files sequentially.
    
    src/recdb.c (parse_database): Advise the kernel that we will scan the
        recdb file sequentially, just in case it cannot notice the access
        pattern on its own.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-6

commit 7ff1236b203a98c02b955dd71875249d66c6f986
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 5 00:09:48 2006 +0000

    Correctly implement AsLL pong.
    
    src/proto-p10.c (irc_pong_asll): New function.
      (cmd_ping): Use it.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-5

commit d1b7b6933a12efa925a118443fb524fe89409339
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 5 00:08:04 2006 +0000

    Add missing underscore in translation key string.
    
    src/mod-helpserv.c (helpserv_usermsg): Add a missing underscore between
        REQUEST and NOT.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-4

commit 9951da4635bc18ea94a99ea71917fbe61d375d5c
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 5 00:05:59 2006 +0000

    Update configure.in; support both baz and tla; avoid using dirent.
    
    configure.in: Remove AC_PROG_RANLIB since we never use ranlib.  Add
        AC_PROG_LIBTOOL since we do use libtool.  Set GNU_ARCH and
        HAS_GNU_ARCH based on whether the system has baz or tla.  Do not
        check for dirent.d_type.
    
    src/Makefile.am: Make the "checkversion" target conditional on
        HAS_GNU_ARCH, and use the detected $(GNU_ARCH).
    
    src/helpfile.c (language_read): Report error text when unable to open a
        language directory.
      (language_read_list): Always stat the language entry to determine
        whether it is a directory; Cygwin has no dirent.d_type and ReiserFS
        has a broken one.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-3

commit 5634a4713944ccb6e594326c4f0ade5023a987da
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 5 00:00:57 2006 +0000

    Update ChangeLog (again?!), ltmain.sh and rx/Makefile.in
    
    ChangeLog: Update again (it didn't take, for some strange reason).
    
    ltmain.sh: Update to current version.
    
    rx/Makefile.in: Regenerate to match.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-2

commit 7e74c1f42bc7b28c939cf7395fdb0b99e94705b4
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Apr 4 23:58:31 2006 +0000

    Rotate ChangeLog for the new year's archive.
    
    ChangeLog: Update for the new year's archive.
    git-archimport-id: srvx@srvx.net--2006/srvx--devo--1.3--patch-1

commit ebdb3503e795945928fd1ece6bc3722a858442bc
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Dec 23 03:14:44 2005 +0000

    Update rx/Makefile.in for current automake.
    
    rx/Makefile.in: Update to use the same version of automake as the
        project's other Makefile.in files.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-36

commit e11d0ae1ccf6131b12b56f0ac1cb9f6b80ba617a
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Dec 23 03:11:09 2005 +0000

    Default to not trimming users on vacation.
    
    chanserv.c (cmd_trim_users): New argument to indicate whether users on
        vacation should be included.
      (cmd_trim): Parse an extra option to control that argument.
    
    chanserv.help: Document this change.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-35

commit 04f461b204cb9228a06acea85b3d93d85caf2b25
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Dec 23 03:06:55 2005 +0000

    Update config.guess and config.sub
    
    config.guess: Update to support newer targets.
    config.sub: Likewise.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-34

commit fa74327b9d8da127eeb9274821ddbbb84f2edc0e
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Nov 17 20:43:26 2005 +0000

    Fixes for LP64 models; announce IPv6 support.
    
    src/alloc-slab.c (SMALL_CUTOFF): Adjust to a multiple of 8.
    
    src/alloc-srvx.c (srvx_malloc): Fix format string for LP64.
    
    src/md5.h (UINT4): Fix typedef for LP64.
    
    src/opserv.c (cmd_warn): Fix whitespace.
    
    src/proto-p10.c (irc_server): Announce IPv6 support.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-33

commit 7711627c781a251cee6738a4cf782b0529582aa9
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Nov 1 00:37:44 2005 +0000

    Avoid leaking information through ChanServ's ban matching.
    
    src/common.h (user_matches_glob): Convert last argument to be flags.
    
    src/tools.c (user_matches_glob): Reorder tests to properly implement
        the MATCH_VISIBLE flag.
    
    src/chanserv.c: Update callers of user_matches_glob() to set
        the MATCH_VISIBLE flag (in addition to MATCH_USENICK).
    
    src/opserv.c: Update callers of user_matches_glob() to pass the
        MATCH_USENICK flag.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-32

commit d553a1b42f127f2abfcfb11a9ac1d06cc7c0e70e
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Nov 1 00:23:14 2005 +0000

    Handle default oplevels.
    
    src/chanserv.c (cmd_mode): Calculate base oplevel as 1 plus one point
        for each access level below owner.
      (chan_opt_modes): Add new argument for mod_chanmode_parse().
      (chanserv_conf_read): Likewise.
      (chanserv_channel_read): Likewise.
    
    src/hash.c (AddChannel): Likewise.
      (AddChannelUser): Set oplevel by default.
    
    src/hash.h (MAXOPLEVEL): New define value.
      (modeNode): Shrink modes and oplevel fields.
    
    src/opserv.c (cmd_chaninfo): Fix indentation; show oplevel after
        nickname rather than before it.
    
    src/proto.h (mod_chanmode_parse): Declare new parameter.
    
    src/proto-bahamut.c (mod_chanmode_parse): Add new parameter (and
        ignore it).
    
    src/proto-common.c (mod_chanmode): Find the default oplevels for
        parsing the mode change.
    
    src/proto-p10.c (create_desc): Remove oplevel field.
      (join_helper): Do not try to set oplevel for new modeNode.
      (parse_foreach): Do not bother parsing oplevels in JOIN, since they
        are no longer used.
      (mod_chanmode_parse): Add new parameter and use it to determine the
        oplevel to set when a valid oplevel one is not specified.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-31

commit 68e25bdce5232df715d70801caeeaf08a14c807b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Oct 13 02:20:55 2005 +0000

    Default ?block (etc) to G-line by IP; fix a buffer issue.
    
    src/opserv.c (opserv_block): Rewrite to block by IP rather than
        hostname.
      (opserv_new_user_check): Avoid overrunning the target buffer.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-30

commit f818ce52a85472cf46bce3065c576f421b7eaf55
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Oct 8 14:56:31 2005 +0000

    Initial oplevel support.
    
    src/proto-p10.c: Fix a few bugs and compile errors in oplevel code.
    
    Patches applied:
    
     * sp@gamesurge.net--2005/srvx--sp--1.3--patch-1
       Oplevel support
    
     * sp@gamesurge.net--2005/srvx--sp--1.3--patch-2
       Oplevel support (part 2)
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-29

commit f5db63f43c651fa624f03c4e2090210957a5613a
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Oct 8 14:33:12 2005 +0000

    Add IPv6 support.
    
    configure.in: Check for struct sockaddr.sa_len and struct addrinfo.
        Also check for freeaddrinfo, getaddrinfo and getnameinfo.
    
    src/common.h: Define irc_in_addr and macros to operate on it.  Declare
        irc_ntop(), irc_ntop_mask(), irc_pton(), irc_check_mask() and
        irc_ntoa().  Remove declaration for parse_ipmask() and undefine
        INADDR_NONE, INADDR_LOOPBACK and MATCH_IPMASK().
    
    src/compat.h (struct addrinfo): Define if it and some flags if not
        defined by the system.
      (getaddrinfo): Declare if necessary.
      (getnameinfo): Likewise.
      (freeaddrinfo): Likewise.
    
    src/compat.c (memcpy): Do not try to fall back onto bcopy.
      (getaddrinfo): Define if it is not defined by the system.
      (freeaddrinfo): Likewise.
    
    src/gline.c (gline_alternate_target): Gut in preparation of a
        necessary rewrite.  Blah.
    
    src/hash.h (struct userNode): Change type of ip field.
    
    src/ioset.c (ioset_connect): Update to support non-IPv4 protocols.
    
    src/main.c (uplink_insert): Update to support non-IPv4 protocols.
    
    src/mod-snoop.c (snoop_new_user): Use irc_ntoa() instead of inet_ntoa().
    
    src/mod-sockcheck.c (sockcheck_cache_info): Update address field type
        and length of hostname field.
      (sockcheck_conf): Update type of local_addr.
      (sockcheck_issue_gline): Update to use irc_ntop().
      (expand_var): Get client IPv4 address from its new place.
      (sockcheck_decide): Do not print the IP twice.
      (sockcheck_begin_test): Remove unnecessary typecast.
      (sockcheck_start_client): Do not print the IP twice.
      (sockcheck_queue_address): Use irc_in_addr_t and irc_ntoa() to form
        the target hostname.
      (cmd_hostscan): Update manipulation functions to use new macros and
        functions for irc_in_addr_t.
      (cmd_clearhost): Likewise.
      (sockcheck_new_user): Likewise.
      (sockcheck_read_conf): Use getaddrinfo() instead of IPv4-only
        functions.
    
    src/nickserv.c (cmd_register): Use newer validity checks for IP.
    
    src/opserv.c (IDENT_DATA): Use irc_ntoa() instead of inet_ntoa().
      (struct opservDiscrim): Update ip_mask and ip_mask_bits type.
      (cmd_whois): Use irc_ntoa() instead of inet_ntoa().
      (opserv_new_user_check): Use irc_ntop() instead of inet_ntoa() and
        update to newer validity check macros.
      (opserv_user_cleanup): Use irc_ntop() instead of inet_ntoa().
      (cmd_addtrust): Update to irc_in_addr_t and its functions.
      (foreach_matching_user): Use irc_pton() instead of the mess that
        existed before.
      (opserv_discrim_create): Use irc_pton() instead of parse_ipmask().
      (discrim_match): Use irc_check_mask() instead of MATCH_IPMASK(), and
        remove ip_mask_str check.
      (opserv_discrim_search): Decide whether an IP match is fully
        qualified based on ip_mask_bits instead of ip_mask_str.
      (trace_domains_func): Add IPv6 support.
      (opserv_staff_alert): Update to new IP validity check macro.
    
    src/proto.h (struct uplinkNode): Fix type of bind_addr field.
    
    src/proto-bahamut.c (AddUser): Use irc_in_addr_t.
      (AddService): Default to an all-zero IP instead of loopback.
      (AddClone): Likewise.
      (irc_user): Use new layout for IPv4 in irc_in_addr_t.
      (cmd_nick): Likewise.
    
    src/proto-common.c (create_socket_client): Remove unnecessary
        typecast.
      (generate_hostmask): Update to use irc_in_addr_t and support
        functions instead of IPv4-specific things.
    
    src/proto-p10.c (irc_p10_pton): New function.
      (irc_p10_ntop): New function.
      (irc_user): Use irc_p10_ntop().
      (AddClone): Use irc_p10_pton().
    
    src/tools.c (ctype): New array holding values of characters as hex.
      (irc_ntop): New function.
      (irc_ntop_mask): New function.
      (irc_pton_ip4): New helper function.
      (irc_pton): New function.
      (irc_ntoa): New function.
      (irc_check_mask): New function.
      (user_matches_glob): Use irc_ntoa() instead of inet_ntoa().
      (parse_ipmask): Delete this function.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-28

commit 352c6e4161118899bd56693d4d79a04d8eba6032
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Oct 7 02:51:12 2005 +0000

    Fix compiler warnings on AMD64 Linux.
    
    src/gline.c (gline_alternate_target): Typecast format field precision
        argument.
    
    src/helpfile.c (helpfile_eval_identifier): Likewise.
      (helpfile_eval_atomicexpr): Likewise.
      (helpfile_eval_expr): Likewise.
      (helpfile_eval_condition): Likewise.
    
    src/log.c (log_audit): Change typecast used to make types compatible.
    
    src/main.c (set_item_rlimit): Use long instead of int as contained value.
    
    src/sendmail.c (send_flowed_text): Typecast format field precision
        argument.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-27

commit ff0c238d3a21be22065386a79245eb58a3f07e2b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun Aug 14 01:34:04 2005 +0000

    Improve channel merging and restrict channel age display.
    
    src/chanserv.c (merge_data): Merge registered and owner-transfer
        timestamps, may_opchan flag, and max visitor count.
      (cmd_info): Only show channel age if the user is privileged.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-26

commit a41facc30ecd0e8c94f2cecf9ec9500f053ebb42
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jul 19 18:31:26 2005 +0000

    Properly check alerts based on numchannels criteria
    
    src/opserv.c (opserv_add_user_alert): Channel alerts also include ones
      with non-zero min_channels.  Allow an alert to be both channel-based
      and nick-based.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-25

commit 6937c018ecd1378aad67dae83ebac5c22f52889d
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jul 19 18:18:48 2005 +0000

    Fix gcc-4.0 compile warnings and errors.
    
    configure.in: Make sure socklen_t is defined.
    
    src/chanserv.c (bad_channel_ban): Make victimCount unsigned.
    
    src/ioset.c (ioset_run): Fifth argument to getsockopt() should be
      socklen_t.
    
    src/ioset.h (clock_skew): Undeclare; it is defined as static.
    
    src/nickserv.c (is_secure_password): Create appropriately typed local
      variable for third argument of dict_find().
    
    src/opserv.c (opserv_bad_channel): Likewise.
    
    src/proto-p10.c (call_oper_funcs): Declare at file scope rather than
      locally to mod_usermode() function.
    
    src/proto.h (dead_users): Undeclare; it is defined as static.
    
    src/saxdb.c (saxdb_write_int): Fix type of string buffer.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-24

commit 422fbe21e27910d476abbb67eaa3a87e7c94088a
Author: Zoot <zoot@gamesurge.net>
Date:   Mon Jul 4 00:37:07 2005 +0000

    Fix match_ircglob() and globtest
    
     * Fix a reversed test in match_ircglob() and make globtest compiles again.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-23

commit 3a129e5ab975b9a94bb269114e815e12e4e523ea
Author: Zoot <zoot@gamesurge.net>
Date:   Wed Jun 1 19:05:39 2005 +0000

    Integrate Global "from" option; reorganize code
    
     * src/global.c: Integrate SF.net patch #1211520 (from bruder2k) with a small
       bug fix; this patch adds a "from" option to Global notices and messages.
    
     * src/global.c, src/global.h: Make struct globalMessage private; cache text
       form of message's post date/time to avoid repeated strftime() calls.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-22

commit 4b0af413a92a26c0a9ebe360cde7ce8ef1b45acb
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon May 30 15:14:56 2005 +0000

    Make match_ircglob() work more like the ircd.
    
    src/tools.c (match_ircglob): Limit glob backtracking in the same way
    that ircds generally do.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-21

commit b28d350c64cfd4efd9ca5abef91753b37be7056e
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun May 1 17:16:58 2005 +0000

    Fix en_GB language name, fix NickServ mergedb command.
    
    FAQ: Clarify FAQ #8.
    
    src/nickserv.c: Avoid losing channel information when replacing an
    account using the mergedb command.
    
    languages/en_UK: Rename to en_GB.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-20

commit 88fc44a80269b8ca6041a73a796b0cfc49121010
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Mar 15 23:12:58 2005 +0000

    Clarify NickServ REGISTER help messages; fix ?raw and ?dump errors.
    
    src/nickserv.help (REGISTER): Rephrase the message about using the
    same password to hopefully make it clearer.
    
    src/opserv.c (cmd_dump, cmd_raw): Use local buffers to hold the
    original message, so that parse_line() will not unsplit the line into
    the "original" buffer and strip out the sentinel :.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-19

commit f146a2949d107a289a6f5e9033af5c929c4ea9e2
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Feb 17 21:42:43 2005 +0000

    Fix registered channel desync; fix HelpServ crash for old cfg files
    
    src/hash.c (AddChannelUser): Do not give ops to the first user to join
    a persistent channel.
    
    src/helpserv.c (helpserv_conf_read): Use a default description for bots.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-18

commit bf504305a00fcaa571d34563d1169d68a91432fd
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Feb 11 03:10:49 2005 +0000

    Mention 'slab' in --with-malloc docs.  Merge fakehosts when merging accounts.
    
    configure.in (--with-malloc): Mention the awesome 'slab' allocator option.
    
    src/nickserv.c (cmd_merge): Copy fakehost to target account if appropriate.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-17

commit a80b5e756a2fbe7ac86b1e13c5118e3d769743dc
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Feb 8 04:42:43 2005 +0000

    Fix memory corruption when removing certain bans from a channel.
    
    src/proto-common.c (mod_chanmode_apply): Make sure we get a pointer to
    the ban we want to deallocate BEFORE we remove it from the banlist.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-16

commit c25cb8ace6a351fac81ba0540fc13fc336487582
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Feb 5 13:03:21 2005 +0000

    Rearrange slab allocation header; minor slab fixes.
    
    src/alloc-slab.c (ALLOC_MAGIC, FREE_MAGIC): Replace with single-byte values.
    (struct alloc_header): Move file_id and line into second 32-bit word
    of header.
    (slab_alloc): Remove commented-out debug statements.
    (slab_unalloc): Remove memset() of freed block and commented-out debug
    statements.
    (slab_free): memset() freed blocks here instead.  Try to fix
    *_alloc_size counting errors (use the originally requested length
    rather than rounded-up length)
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-15

commit e0275e30a54f86bd7986c8c94d04c120bcc2b5ba
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Feb 5 03:52:51 2005 +0000

    Even more slab allocator updates.
    
    src/slab-alloc.c (SLAB_DEBUG): Default to on.
    (SMALL_CUTOFF): Fix default value (must be a multiple of 4).
    (slab_unalloc): Fix slab counting.  When SLAB_RESERVE, allocate the
    set of pages in a burst, rather than supplementing them as we unmap.
    (slab_realloc): Fix a rather embarassing (and LARGE) memory leak.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-14

commit 2c226ca02d7d2fcbc9d389a7ff03da4598cb5235
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Feb 4 16:36:40 2005 +0000

    more debugging updates
    
    src/alloc-slab.c: Switch free slab list from a stack to queue, and
    make sure there are SLAB_RESERVE in the queue before an old slab is
    dereferenced.  This causes a fault when dereferencing stale pointers
    to the last SLAB_RESERVE full slabs.
    
    src/log.c: Make struct logEntry *last static, to make sure gcc does
    not optimize it away.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-13

commit f9cb347d6b3e20078b012f0ab393cc78ae38aa56
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Jan 31 22:28:59 2005 +0000

    More slab allocator updates.
    
    src/alloc-slab.c: Disable extra debugging by default.  Add more
    statistics counters.  Change element type of little_slabs[].  Keep a
    global list of unused (full) slab pages, rather than per-slab.
    Various other cleanups and fixes.
    
    src/chanserv.h: Can only be off-channel with off_channel > 1.
    
    src/main.c: Update years in copyright notice.
    
    src/opserv.c: Remove OSMSG_STATS_MEMORY.  Make cmd_stats_memory()
    allocator-specific.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-12

commit 7ea8608704d9a9f265746365a0cf132d88d0015c
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Jan 31 11:08:15 2005 +0000

    Add "?stats memory" and optional alloc_header to slab.
    
    src/alloc-slab.c: Add alloc_header (but no redzone) debug support,
    enabled by default.  Update alloc_count and alloc_size.
    
    src/opserv.c: Provide "stats memory" command for slab allocator.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-11

commit a31e835570e28bbbc51d9a7721da34f300d75303
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Jan 31 05:14:52 2005 +0000

    Add slab allocator; reduce delta with srvx-gs.
    
    configure.in: Check for getpagesize().  Support --with-malloc=slab.
    
    src/Makefile.am: Add alloc-slab.c as an extra source file.
    
    src/alloc-srvx.c: Clean up srvx_free() slightly.  Check for previously
    allocated blocks.
    
    srvx.conf.example, src/chanserv.c, src/main.c, src/modcmd.c,
    src/proto-p10.c: Apply patches to bring closer to srvx-gs branch.
    
    src/log.c: Assert and _exit() on fatal log messages.
    
    src/opserv.c: Clarify logic for modes to set on join floods.
    
    src/proto-common.c: Accept off-channel commands in registered channels.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-10

commit 3b7f78c5f9bb4de8c9e027e12cc210d145378478
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Jan 26 21:16:54 2005 +0000

    offchannel fixes; more memory verification
    
    src/chanserv.c (cmd_register): Do not join channels if the default
    options include being offchannel.
    
    src/common.h: Verify list allocations when appending or removing.
    
    src/hash.c (GetUserMode): Verify channel and user list allocations.
    
    src/log.c (log_entry_search): Keep pointer to last visited log entry.
    
    src/proto-p10.c (mod_chanmode_parse): Fail if trying to change +z when
    passed MCP_REGISTERED.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-9

commit 9fd781c7d53de22b20ec087a12d0659b4a11ef4c
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Jan 24 17:12:38 2005 +0000

    typo fix in alloc-srvx.c; avoid dereferencing free()'d bans
    
    src/alloc-srvx.c (srvx_realloc): Fix argument list to srvx_free().
    
    src/chanserv.c (find_matching_bans): Make temporary copies of bans to
    be removed.  Double-check remove count at end of loop.
    (unban_user, cmd_open): Free the string copies.
    (cmd_unbanall): Make temporary copies of removed bans and free them.
    (handle_mode): Likewise.
    
    src/opserv.c (cmd_clearbans): Likewise.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-8

commit 31a555752efc3955033ab1f2600f921e840986f0
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Jan 24 16:45:44 2005 +0000

    More allocation debugging support.
    
    src/alloc-srvx.c (srvx_realloc): Reorganize.
    (verify): New function.
    
    src/common.h (verify): Define and/or declare suitably.
    
    src/dict-splay.c (dict_splay): Verify node at each iteration.
    (dict_insert, dict_remove2, dict_find, dict_delete,
    dict_sanity_check): Verify entire dict.
    (dict_sanity_check_node): Verify node as valid allocation.
    
    src/hash.c (DelChannel): Verify channel before deletion.
    (GetUserMode): Verify channel, user, and each modeNode.
    
    src/mod-sockcheck.c (sockcheck_free_client): Verify client.
    (sockcheck_timeout_client, sockcheck_advance, sockcheck_readable,
    sockcheck_connected, sockcheck_begin_test): Likewise.
    (sockcheck_queue_address): Verify cached sockcheck entries.
    
    src/proto-p10.c (DelUser): Verify user before deletion.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-7

commit a2c56dae2b6d7fcd020cbb577241171200313aae
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Jan 21 15:10:49 2005 +0000

    More debug allocator fixes and enhancements
    
    src/alloc-srvx.c (*_MAGIC): ASk recognized the CCSDS ASM sequence.
    (srvx_free): Overwrite with 0xDE bytes to distinguish from
    uninitialized values.  As SailorFrag suggested, only overwrite the
    user region.
    
    src/dict-splay.c (dict_insert): Check whether free functions need to
    be worked around here as well.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-6

commit 62a616fa0eb22060a38e348b650cb202c9a1ce32
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Jan 21 00:48:35 2005 +0000

    Add redzone and statistics reporting to debug allocator.
    
    src/alloc-srvx.c (redzone): New variable to detect buffer overwrites.
    (alloc_count, alloc_size): New variables to track allocation stats.
    (srvx_malloc, srvx_realloc, srvx_free): Use the above.
    
    src/opserv.c (OSMSG_STATS_MEMORY): New translation string.
    (cmd_stats_memory): New (conditional) command function.
    (init_opserv): Conditionally provide cmd_stats_memory.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-5

commit 61f5e609a417c819b8a484f371ed5f89a950bf6a
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Jan 20 23:41:17 2005 +0000

    Add built-in debug malloc wrapper.
    
    TODO: Remove the completed TODO item.
    
    configure.in: Add --with-malloc=srvx support.
    
    src/Makefile.am: Add alloc-srvx.c to extra sources.
    
    src/common.h: Reindent debug malloc directives; add directives for
    WITH_MALLOC_SRVX.
    
    src/dict-splay.c: Kludge around free() as macro vs function.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-4

commit 1c7c87d59fddf5c2c79cf7c930c36cd5d8700f67
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Jan 20 22:51:54 2005 +0000

    various bugfixes and IPv6 preparation work
    
    src/modcmd.c (modcmd_privmsg): Fix CTCP PING response type.
    
    src/opserv.help: Add column headers for command lists.
    
    src/tools.c (is_gline, split_ircmask): Accept colons in hostnames.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-3

commit 211818b3cf24423c6ca02e932b611f6c44259e66
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Jan 5 01:03:05 2005 +0000

    Add MODE_REGISTERED as +z for P10.
    
    Add MODE_REGISTERED as +z for P10.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-2

commit 560e9108297abf17e4cf0a1881db3dd995fa98a1
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Jan 4 19:35:57 2005 +0000

    Rotate ChangeLog for new repository; clarify documentation files
    
    Rotate ChangeLog to show changes for srvx@srvx.net--2005-srvx repo.
    
    Fix various file permissions to 664 instead of 620.
    
    Update FAQ and TODO.  Add UPGRADE file to arch and to distribution.
    git-archimport-id: srvx@srvx.net--2005-srvx/srvx--devo--1.3--patch-1

commit 2f748015dfdabd59aa31ed65555012ff652818a4
Author: Zoot <zoot@gamesurge.net>
Date:   Tue Nov 23 04:09:30 2004 +0000

    Fix ban reader
    
     * src/chanserv.c: Drop invalid bans with no reason during database reads
       and require bans to have a reason set in add_channel_ban().
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-84

commit 942156e9d99216d0ac9430b78b08f69261897251
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Nov 10 01:25:53 2004 +0000

    Fix nick length check in is_valid_nick().
    
    The for() loop in is_valid_nick() leaves 'nick' as an empty string,
    which is obviosly shorter than the nick length limit.  Fix that.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-83

commit abfb2b02cd3530304307b236b76e4856a4c9f870
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Oct 16 21:14:11 2004 +0000

    Fix glob matching against IPs
    
    Do not require the first character in an IP glob to be a digit.  If an
    IP-looking glob does not match, fall through to the other host matching
    rules, in case the IP-looking glob really matches their hostname.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-82

commit 8e9b65287ad04e860cf5c0cb17b7356cfa6fb06c
Author: adam <adam@gamesurge.net>
Date:   Wed Sep 15 04:14:14 2004 +0000

    Consolidate use_registered_mode into off_channel and expand overall functionality
    
    * srvx.conf's off_channel setting now allows us to turn on all of the features of out-of-channel services without activating the
    channel setting to have chanserv part
    
    
    
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-81

commit 4bd87197fa06ef824d69667ce1603bd600c0bfb5
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Sep 13 13:11:38 2004 +0000

    ChanServ bugfixes for +z and addbans in suspended channels
    
    If ChanServ should use MODE_REGISTERED, update that when moving channels.
    
    Do not check for bans against an auth'ing user in suspended channels.
    
    Change the example entries for off_channel and use_registered_mode to
    make the enabled/on values more obvious.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-80

commit 4249a38af4b0f597cbeb81d806ababa0cebf23c1
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Sep 8 23:36:51 2004 +0000

    Implement item #1011114, #997053
    
    * Adjust the default max_greetlen to 200 (since greetings are now
      unconditionally capped at one line of output).
    
    * Allow DNRs to be shown for accounts that currently do not exist.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-79

commit 9cfab8b3435bc7bc9e6ebba6559545d93ef2551b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Sep 6 13:35:59 2004 +0000

    Fix bugs; better handle oplevels from ircu2.10.12
    
    * Fix order of port and IP in sample socks4 proxy test.
    
    * Fix a bug in dict_remove2() that corrupted the tree order if a
    cleanup function tried to delete another node.
    
    * Fix a buffer overflow in cmd_joiner.
    
    * Get rid of free_nick_info() since it is really just free().
    
    * If our P10 uplink sends an oplevel in a burst, treat it as a chanop.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-78

commit b480f048cc789e2621d60db87e3925bd938eecfa
Author: Zoot <zoot@gamesurge.net>
Date:   Thu Aug 12 16:06:55 2004 +0000

    More title host checking
    
     * src/nickserv.c: Make oset title verify that the final combined fakehost
       will not be truncated before storing the title. Also, supply a missing
       format string argument.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-77

commit ff6e737157f5025c033a016fefe752e35ee81d33
Author: Zoot <zoot@gamesurge.net>
Date:   Sun Aug 8 17:42:01 2004 +0000

    Fix format string bug
    
     * src/chanserv.c: Fix a format string bug in the myaccess command.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-76

commit 2a7a83b5ca8f28fc6555d8e8603c1f8e8fcbee43
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Aug 2 12:54:13 2004 +0000

    Assorted bug fixes
    
    * Add missing semicolon in German translation of CSMSG_TRANSFER_WAIT.
    
    * Fix pointer used in !trim max_access calculation.
    
    * Default to maximum line length for all "single-line" messages.
    
    * Return success from NickServ ounregister so it is logged properly.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-75

commit 8979eace0b2cb3192a4bce700109132d9698e786
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Jul 22 04:03:22 2004 +0000

    Channel suspension, transfer and line wrap changes
    
    * Treat half-unsuspended channels as unsuspended, to avoid crashes
    caused by sysadmins editing chanserv.db in screwy ways.
    
    * Add a srvx.conf option to limit how often channel owners can give
    away channel ownership.
    
    * Limit most output line expansions to just one line.
    
    * Remove unnecessary assert(hs_user) checks from mod-helpserv.c.
    
    * Don't run_empty_interval() in HelpServ when the user's server is
    still bursting.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-74

commit bf032b40e57d9405192aef662e5c7b87c6fd69b6
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Jul 19 03:38:09 2004 +0000

    Bugfixes for !trim users, !unsuspend and /clearmodes
    
    * Show actual upper bound used to trim users.
    
    * Update whether an user being unsuspended is in the channel.
    
    * Add a missing "break;" so that /clearmodes c doesn't clear NOCTCPS too.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-73

commit 6185d1db68949d3fc6fe34bfe9a893431834154e
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Jul 12 19:06:38 2004 +0000

    add FAQ to distribition; make compatible with gcc-2.95
    
    * Add FAQ to EXTRA_DIST in root.
    
    * Name the anonymous union inside struct mod_chanmode.
    
    * Typecast printf() field width arguments to int.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-72

commit a9c0c9ce23121e6a7a18c8da2ad5759470d62fc9
Author: Zoot <zoot@gamesurge.net>
Date:   Sat Jul 10 04:42:12 2004 +0000

    Fix OperServ inviteme crash
    
    * src/opserv.c: Fix a NULL pointer dereference in inviteme that caused crashes
      for some users.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-71

commit 58a945def778d30042a3cef783afe0b0921e417c
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Jul 1 02:23:21 2004 +0000

    miscellaneous bugfixes and indentation fixes
    
    * srvx.conf.example: Clarify comment about "default_hostmask" setting.
    
    * patches/sethost13.diff: Forward port of sethost patch, from Reed Loden.
    
    * src/opserv.c (cmd_kickbanall): Free mod_chanmode_change after use.
    
    * src/proto-p10.c (cmd_whois): Fix indentation and show real server to opers.
    
    * src/tools.c (string_buffer_append_vprintf): Avoid a possible buffer overrun.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-70

commit f2f16d7745ddf81913a94c42444b5136ce1d2828
Author: adam <adam@gamesurge.net>
Date:   Wed Jun 16 12:23:32 2004 +0000

    added modes parameter to srvx.conf to control user modes
    
    * each service now has a 'modes' parameter in srvx.conf to specify their individual modes.. if left blank, will default to whatever 'services' modes work for your ircd.
    
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-69

commit 1922faa8aec1758138beaa26dfde2c8fdf6978a5
Author: adam <adam@gamesurge.net>
Date:   Tue Jun 8 09:24:49 2004 +0000

    fixed MODE_REGISTERED bug; introduced MCP_REGISTERED
    
    * fixed MODE_REGISTERED bug: srvx was sending a blank mode change on channel unregistrations; we now have a srvx.conf setting that dictates whether or not to use MODE_REGISTERED (which has no corresponding letter on P10 networks!) - also, we now set MODE_REGISTERED in newly registered channels (which we werent before)
    
    * introduced MCP_REGISTERED: we now don't let channels that are registered play with the registered mode (usually +r on bahamut networks) via chanserv user-level commands (ie: !mode -r)
    
    
    
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-68

commit af64bb7eacfe91eeb1198cb56ccea4a9b405311d
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat May 22 04:24:57 2004 +0000

    Add fake host support (assuming your ircd supports it)
    
    Add definitions in various places to support assigning fake hosts to
    users.  We will not give you (or make for you) patches to make your
    ircd support this feature, so please do not ask.  You must set a
    certain srvx.conf setting to be able to assign fakehosts; finding it
    is left as an exercise to the reader.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-67

commit 0ab16332fbc5b7fbead11080e380f002b67f2a2b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat May 22 03:00:05 2004 +0000

    Remove obsolete check for src/srvx directory
    
    Since srvx is in arch, and arch doesn't have CVS's eccentricities
    about old directories, remove the test for src/srvx being a directory.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-66

commit aa4caec3b1ac004ba6db229425d70ee43c237cd5
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri May 21 12:58:18 2004 +0000

    Fix memory leak in ?accounts
    
    Fix a memory leak in ?accounts.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-65

commit 5bce6ad6808a77bcf3e2ae0381c38768ecdcc689
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri May 21 12:38:39 2004 +0000

    Fix helpserv whine when helpers leave the channel; fix ?devoiceall
    
    Remove the parting modeNode before making callbacks, so callbacks
    don't get confused and think the user is still in the channel.
    
    In ?devoiceall, OpServ should only remove voice from users who have it.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-64

commit a01cf0baa63c62930076c54931580fbc97db7dd3
Author: adam <adam@gamesurge.net>
Date:   Mon May 17 09:44:35 2004 +0000

    fix minor EnfModes bug in chanserv.c
    
    * address bug id #955105; minor EnfModes issue
    
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-63

commit 47a88e544c806be93a07b5c85c83c83c82551ba3
Author: adam <adam@gamesurge.net>
Date:   Fri May 14 06:27:30 2004 +0000

    fix stupid typo from --patch-61
    
    * fix stupid typo in nickserv.c from --patch-61; sigh.
    
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-62

commit 53da0a9d54c461c2b96238200b0bd981eb272bf1
Author: adam <adam@gamesurge.net>
Date:   Fri May 14 05:37:38 2004 +0000

    rearrange chanserv-level ban/kick messages; change wording on authentication cookie email, implement old tried2reg patch
    
    * chanserv ban/kick messages are now displayed as "(name) message" as opposed to what they were, which was "message (name)"; this was done to remove irregularity with how it was in some parts of the code.
    
    * at semi-popular request, wording in initial registration emails has been changed to explain that COOKIE should not be used more than once
    
    * implemented old 'tried2reg' patch - you may only use /msg authserv register once per session (this was not the case before, which was apparent with email registrations)
    
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-61

commit 589321c6fc0a21af37d5ad024f39ac3debf83b6e
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun May 9 03:05:48 2004 +0000

    Fix several bugs; make off-channel a per-channel option
    
    * Add per-channel option (!set offchannel) for off-channel services
    support.
    
    * Rename REGISTERED_MODE to MODE_REGISTERED and always use it.
    
    * Delete remaining (registered) channels on exit.
    
    * Fix tests in proto-p10.c for chanop-ness when using off-channel
    services support.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-60

commit 5d0f6e3498ccb9a1801a929b67aaf34108e12ce1
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri May 7 14:32:06 2004 +0000

    allow daemon mode under cygwin
    
    * Remove code to disable daemon mode in Cygwin, since Cygwin now
    properly implements fork() etc.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-59

commit 5bc1409db8036a124fd2463d7d9d19dbef423231
Author: adam <adam@gamesurge.net>
Date:   Thu May 6 09:46:38 2004 +0000

    basic off-channel support; restructuring how part functions are handled
    
    * added srvx.conf setting to allow chanserv to work being outside of a channel; if you'd like to have srvx set a mode as it joins, edit REGISTERED_MODE in hash.h. this will not work properly on P10 networks - though it may be nice for bahamut-based networks. either way, please do not ask us for assistance.
    
    * changed the way part functions are called - a modeNode is now passed, and they are run *before* the user's membership link in that channel is nuked.
    
    
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-58

commit f644c7df0e475ce87a354c5bd9344155c7e85352
Author: adam <akl@gamesurge.net>
Date:   Sat May 1 11:17:11 2004 +0000

    introduce unreg_privmsg_func, fix minor autoinvite issue, alter account-finding on local services clients
    
    * introduce unreg_privmsg_func: unreg_privmsg_func()/unreg_notice_func() - both of which reverse the effect of reg_privmsg_func()/reg_notice_func()
    
    * fix minor autoinvite issue: UserAutoInvite (aka: '!uset autoinvite ..') no longer invites you to channels you weren't in if the server you are on just reconnected to the network
    
    * alter account-finding on local services clients: non +k users on the local services server are now no longer referred to as services (at least not in regard to accounts..)
    
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-57

commit 283d06073aa6f83e44bcd167974b2651f07f0e26
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Apr 29 01:57:00 2004 +0000

    Remove debug messages from account MERGE command; translate RECLAIM kill message
    
    * Change the debug messages in NickServ MERGE to be more succinct and
    useful for accounting/undos.
    
    * Translate the kill message sent when reclaiming an owned nickname.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-56

commit 6a1b2727d2ce3a898109c3f827bcde9528f21de7
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Apr 29 01:51:19 2004 +0000

    Fix Bahamut assertion failure; move BURST to more "natural" place
    
    * Fix a mod_chanmode assertion failure when using proto-bahamut.c with
    debugging enabled.
    
    * Send BURST in response to SVINFO, not SERVER, so that eventual
    timestamp adjustment is more accurate.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-55

commit 626a295c8f46997e50ce724d69a0361f6c597c46
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Apr 29 01:41:37 2004 +0000

    Fix !up for users below GiveVoice level; implement RFE#933634
    
    * If users have access belowGiveVoice, do not let them use UP.
    
    * Show channel flags (suspended, autoop, etc) in MYACCESS.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-54

commit 09dd0ebc2d00e8ee9a9d93d4a709f280f598b304
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Apr 29 00:31:22 2004 +0000

    REALLY remove duplicate line in languages/en_UK/chanserv.help.
    
    REALLY remove duplicate line in languages/en_UK/chanserv.help.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-53

commit 74b77d34cec209ba49b6a23060335640a78710ef
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 28 19:55:22 2004 +0000

    Remove duplicate line in en_UK chanserv.help file
    
    Remove a duplicate line in languages/en_UK/chanserv.help.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-52

commit f02779573da9c1218f0e4f0dcae058b75a0a329b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Apr 28 19:53:40 2004 +0000

    Sanity check user infolines
    
    * Disallow infolines longer than a configured maximum length (by
    default, 400 characters).
    
    * Disallow infolines that contain certain characters (currently
    just ^A).
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-51

commit 803963ea74eb2330ccbd8bfa8f743146e2ebcb12
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Apr 12 03:25:03 2004 +0000

    fix compile errors on readdir()-deficient platforms
    
    * Cygwin does not have "struct dirent.d_type".  Check for that in the
    configure script and use stat() to test for directory-ness instead.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-50

commit 22733dacec04f903200d8794fd98977c70f4629a
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Apr 10 23:04:21 2004 +0000

    add en_UK translation by Byte
    
    Add en_UK translation by byte.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-49

commit fdd99c7832338853f3d4827efcd71ff1a8b908b1
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Apr 9 22:18:21 2004 +0000

    Fix service persistence bug in patch-47
    
    patch-47 attempted to fix a previously reported error where srvx would
    create NickServ, ChanServ, OpServ and Global even if the "nick" entry
    was omitted from srvx.conf.  This broke persistence of all service
    bots added by the modcmd.service\ add comand.  (Closes: #932566)
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-48

commit b9d859d1bd847559b3b2eca68d803f1d8f08939b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Apr 9 20:08:58 2004 +0000

    Fix service triggers; allow service hostname configuration; fix glitches
    
    * Improve length checking logic in ChanServ.names command.
    
    * Fix service trigger registration so that database is used in
    preference to srvx.conf and compiled-in defaults.
    
    * Allow service hostnames to be configured in srvx.conf and through
    "service add"; document this and show an example of setting the
    service description.
    
    * Fix an uninitialized value bug in OpServ.join.
    
    * Make OpServ.addtrust accept a count of 0.
    
    * Remove untranslated messages from languages/de/modcmd.help (so that
    new "service add" help is inherited).
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-47

commit 98027ee8cf5c0a17d7e77f8e3cb6b3830054bcff
Author: adam <akl@gamesurge.net>
Date:   Fri Apr 9 01:57:12 2004 +0000

    changes to !uset autoinvite behavior, introduction of allchanmsg_func hooks
    
    * changes to !uset autoinvite behavior: the autoinvite flag now works whether or not the channel it is set in is +i/+k.
    
    * introduction of allchanmsg_func hooks: there is now a set of hooks (available via reg_allchanmsg_func()) in place to catch all public channel messages the services server sees.
    
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-46

commit 70524270fca9cdcbd05db99bf4650f68b0bc4c39
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Apr 8 03:42:49 2004 +0000

    Fix automatic ChangeLog tag (I hope)
    
    * Try to set the ChangeLog file tag correctly for it to be updated on
    commit.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-45

commit 0ec3f7b90a5f7739bac5a169cea44ef5812ff4b4
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Apr 8 03:18:41 2004 +0000

    Fix some signed/unsigned misbehaviors; add FAQ
    
    * Change format and variable types to unsigned so as to avoid
    confusing negative numbers with very large positive numbers.
    
    * Create a FAQ file
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-44

commit 5558cfa9dfb0be903ed28e8542aeb5904777b560
Author: Zoot <zoot@gamesnet.net>
Date:   Sun Apr 4 21:37:36 2004 +0000

    Fix spurious user protection notices
    
    * Fix ChanServ warning users when they remove a ban set on a protected
      user's hostmask.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-43

commit 35de4f4eceac8b6ed909c11afd648bf11314dc53
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sat Apr 3 03:26:43 2004 +0000

    I18N fixes and (hopefully) protocol fixes
    
    * Correct some grammar in German translation (extraneous "vor").
    
    * Try to fix desyncs when an older channel bursts in after initial join.
    
    * Languages must be subdirectories that do not start with '.', so
      check that before applying them as a language.  Since we already
      have the language list at helpfile_finalize() time, use it instead
      of walking the "languages" directory again.
    
    * Ignore 467 response from uplink.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-42

commit 8f6f411abe54eb69dce48d3f7196554896160dd2
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Apr 2 18:38:19 2004 +0000

    Fix mistakes in backport of German translation
    
    * Delete mod-serverspy.help since it is not part of this code base.
    
    * Replace /AUTHSERV with /msg $N@$s.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-41

commit a712bad7f7e5de8eba9de2ee478188e12d3796f3
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Apr 2 18:34:40 2004 +0000

    Add German translation
    
    * Fix a format string bug in nickserv.c:NSEMAIL_ALLOWAUTH_BODY.
    
    * Use a separate key name for !netinfo's "Total User Count" so
      other languages can get proper alignment for both that and
      !info #channel.
    
    * Add German language translation by Marc 'feigling' Khrer.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-40

commit 231fe845794b9ab3c0dbabe61f97fb6e5e4b2e6b
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Mar 30 04:40:38 2004 +0000

    translate interval strings; translate more NickServ messages
    
    * Translate interval strings to the user's language.
    
    * Translate cookie emails and auth failure messages based on the
    account's preferred language, rather than the user's preferred
    language (they will not be authed, so they would get lang_C).
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-39

commit 96ba4ec9f413923dde4fa81f9f9883139c7576d5
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Mar 30 04:25:14 2004 +0000

    Fix uninitialized mod_chanmode element in debug build
    
    * Convert an old-style auto-variable mod_chanmode to use
    mod_chanmode_init() so that all fields are initialized.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-38

commit 97606405d40d4b59d5d102f6b9373cf92d1bb7e9
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Mar 30 04:11:03 2004 +0000

    Multi-language support fixes
    
    * Copy keys in per-language message tables so that they don't point to
    free()d memory.
    
    * Only warn about missing/extra messages if there are any.
    
    * In language_read_list(), do not allocate languages "." or "..".
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-37

commit 44a80d95ca3cc436f26759946d9305f587728119
Author: Michael Poole <mdpoole@troilus.org>
Date:   Mon Mar 29 21:10:10 2004 +0000

    automatic arch-version.h update; CTCP support; helpfile fixes; disk-out-of-space error detection and handling
    
    * Add a rule to automatically check arch version and update
    arch-version.h when needed
    
    * Implement CTCP response handling messages direct to services.
    
    * Fix grammar error in GIVEOWNERSHIP help entry, fix cross-reference
    markup in several ChanServ commands (should underline, not bold, the
    "See Also:" link), remove VERSION help entries from modules that no
    longer implement that command.
    
    * Check for errors (using setjmp/longjmp) when writing to a saxdb
    file, and log the failures.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-36

commit 6a4a51ee523093cbc99088380ce8f39862e86aa9
Author: Michael Poole <mdpoole@troilus.org>
Date:   Sun Mar 28 03:28:18 2004 +0000

    More helpfile fixes
    
    * Allow a helpfile to use another module's expansion function by using
    the syntax ${module:variable}, so that "set language" can be kept in
    nickserv.help.
    
    * Fix typos, unclear help entries, and add some missing entries.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-35

commit 8729ab9765eb9e6e0c9de7b4c74dfa07d565684c
Author: Zoot <zoot@gamesnet.net>
Date:   Thu Mar 25 23:17:04 2004 +0000

    Documentation update
    
    * Make some further updates to INSTALL to bring it in line with srvx 1.3
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-34

commit dd7b0fa5c9ca5c12475b228036c99fca6cb8a05c
Author: Michael Poole <mdpoole@troilus.org>
Date:   Thu Mar 25 21:41:17 2004 +0000

    Message and documentation cleanups
    
    * Update version number in INSTALL and mention where we do most of
    srvx's testing.
    
    * Move the message about using the authcookie to inside of
    nickserv_make_cookie(), so that when another cookie exists, only the
    "cookie already pending" message is sent.
    
    * Fix various typos, extraneous sentences, and misplaced command
    listings in nickserv.help.
    
    * Remove (unused) fakehost options from srvx.conf.example and update
    ChanServ's set_shows option.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-33

commit 36d01457dedebd3d7a397615bf4be4c5e7e898d9
Author: Michael Poole <mdpoole@troilus.org>
Date:   Wed Mar 24 20:32:16 2004 +0000

    Infinite recursion fix; mod_chanmode_parse() fixes
    
    * Default lang->parent to lang_C rather than language_find("C"), so
    that trying to create language "C" does not cause infinite recursion.
    
    * Fail when we try to parse a mode with an unrecognized mode character
    from users; ignore them coming from a server.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-32

commit 7b88693f1d3411c4a1f69076242b3ec967cf176f
Author: Michael Poole <mdpoole@troilus.org>
Date:   Tue Mar 23 00:12:53 2004 +0000

    i18n fixes
    
    * Fix typos in several message strings, and clarify others.
    
    * Typecast first argument of gethostbyaddr() to quash warnings.
    
    * Load languages in finalization, not initialization, and do not crash
    when running off the end of a localized strings.db file.
    
    * Show the LANGUAGE option in NickServ SET response.
    
    * Remove mention of GHOST command when !enable_ghost.
    
    * Only initialize alloc_argc when !defined(NDEBUG)
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-31

commit 9b4e245f9b887184ebda494705e2e11700cd2d67
Author: Michael Poole <mdpoole@troilus.org>
Date:   Fri Mar 19 14:46:53 2004 +0000

    Fix language initialization bug; fix email change text
    
    * Initialize each new account's language when registering it.
    
    * Send the first half of the email change cookie to the old address,
    rather than sending the second half (which also goes to the new
    address).
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-30

commit d5b0c5e1ca344d1863e8250158e8bc24f9b677d5
Author: Michael Poole <mdpoole+arch@troilus.org>
Date:   Wed Mar 17 04:27:17 2004 +0000

    ChanServ seen fixes; other cleanups
    
    * Remove rule to generate the unused EXTRA_MODULES preprocessor macro.
    
    * Properly adjust ChanServ seen time when a user leaves or is kicked
    from a channel.
    
    * Read languages from disk before initializing the core services,
    since they must all be available when loading accounts.
    
    * Fix a typo in the log BNF documentation, and add =SEVLIT support for
    consistency.
    
    * Add missing "invalid" to NSMSG_INVALID_ANNOUNCE string.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-29

commit 91078a71848bcca5aad6739233ab40fb7e829186
Author: Entrope <entrope@clan-dk.org>
Date:   Fri Mar 12 00:27:29 2004 +0000

    fix channel mode bouncing bugs
    
    * Make mod_chanmode_dup() copy the limit and key like one might expect.
    
    * Make ChanServ's handle_mode() copy the default modes using
    mod_chanmode_dup() instead of an implicit memcpy.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-28

commit c0b9228295691cece5548946bb6f41c74c02940e
Author: Entrope <entrope@clan-dk.org>
Date:   Thu Mar 11 16:44:35 2004 +0000

    Fix !resync; helpfile updates; improve ?modcmd
    
    * Make ChanServ.RESYNC op (or voice) users when GiveOps (GiveVoice,
    respectively) is 0 and the user is not on the userlist.
    
    * Remove mention of PEONINVITE from chanserv.help.
    
    * Mention the GIVEOWNERSHIP command in HelpServ's help file; remove
    mention of the removed VERSION and WRITE commands.
    
    * Make modcmd.MODCMD accept no options, and display the (final)
    settings for the command.  Update the help entry for it.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-27

commit 46054e8970980d83c2a8a9d0d000bb2d94179662
Author: Entrope <entrope@clan-dk.org>
Date:   Wed Mar 10 19:04:59 2004 +0000

    License update
    
    * Revert to plain GPLv2.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-26

commit 4e80f2744a8fdf0f9698da8f5bb6a4cee09ad110
Author: Entrope <entrope@clan-dk.org>
Date:   Wed Mar 10 17:03:30 2004 +0000

    Further cleanups and bugfixes
    
    * Remove "TODO: reimplement" comment in chanserv.c, since all the
    functions were already reimplemented.
    
    * Make "/msg ChanServ huggle" work again.
    
    * Fix error messages when bad target names given to say and emote.
    
    * If we get a MODE change affecting a user who somehow quit already,
    just ignore it.
    
    * Add debugging checks for mod_chanmode argument counts.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-25

commit 20409cfdfc193064e3c9f9d575abdc38c9b4c7f5
Author: Entrope <entrope@clan-dk.org>
Date:   Mon Mar 8 17:41:48 2004 +0000

    bug fixes (from code coverage tests)
    
    * Fix typo in CSMSG_ADDED_USER message.
    
    * Fix memory leak in !bans when no bans are shown.
    
    * Fix SAY, EMOTE to user targets.
    
    * Require unsuspended channel for OPCHAN (i.e. ChanServ is in-channel).
    
    * Fix typo in TOPICSNARF help description.
    
    * Fix mod_chanmode argc when reopping services.
    
    * Fix memory leak when rehashing with with an uplink bind address.
    
    * Fix typo in OSMSG_NICK_UNRESERVED message.
    
    * Make *OpServ.op actually op non-ops, instead of just ops.
    
    * Fix kick message translations when shutting down a channel.
    
    * Fix use-after-free if an oper does ?part #badchan.
    
    * Make mod_chanmode_apply() more sensitive to invalid mode changes.
    
    * In create_helper(), let AddChannelUser() decide whether to op the user.
    
    * Remove "Mod" and "Game" from "set_shows" in srvx.conf.example.
    
    * Do not print the status "." in tests when full debug mode is on.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-24

commit 205b8f85116328b71b779f570e18ea35ae5a8a67
Author: Entrope <entrope@clan-dk.org>
Date:   Thu Mar 4 04:48:35 2004 +0000

    Bug fixes and cleanups
    
    * Remove unused src/expnhelp.c file.
    
    * Do not call mod_chanmode_announce() if we give a user neither voice
    nor ops (it causes an assertion failure).
    
    * Make switch() on mod_chanmode argument modes a little clearer.
    
    * Add OSMSG_NICK_UNRESERVED format string.
    
    * Translate weekly statistics report headers for HelpServ.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-23

commit f7f6e7ca22a5a4345431c81dc7821f8de2175306
Author: Entrope <entrope@clan-dk.org>
Date:   Wed Mar 3 01:47:41 2004 +0000

    Various bug fixes
    
    * In ?kickbanall, mod_chanmode_alloc(1) when we only use one arg.
    
    * In ?modcmd ... channel_access, accept "0" to mean the same as "none."
    
    * In log.c, make a single function to free the oldest log entry for a
    log_type struct.
    
    * Add more checks for cmd==NULL in chanserv.c:eject_user().
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-22

commit 03c640891cd3f3fc004e4dc55e86284ff2537659
Author: Entrope <entrope@clan-dk.org>
Date:   Tue Mar 2 18:21:59 2004 +0000

    Add MYACCESS command; fix reference count bug in MOVE
    
    * Always LockChannel(target) when moving a registered channel.
    
    * Move the self-access list function from ACCESS to MYACCESS, so that
    ACCESS can be marked with MODCMD_REQUIRE_CHANUSER.
    
    * Update documentation for MYACCESS vs ACCESS.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-21

commit e99d6d7abffe063b831c3de65270ce252e11d6e1
Author: Entrope <entrope@clan-dk.org>
Date:   Tue Mar 2 04:35:35 2004 +0000

    Fix NickServ language crash; convert four ChanServ binary options to level options
    
    * When you use "/msg nickserv set language" and you have no language
    assigned, it would crash.  Fix this.
    
    * Convert four ChanServ binary options to level based options:
      * Voice (CHANNEL_VOICE_ALL) -> Voice (lvlGiveVoice)
      * UserInfo (CHANNEL_INFO_LINES) -> UserInfo (lvlUserInfo)
      * PeonInvite (CHANNEL_PEON_INVITE) -> InviteMe (lvlInviteMe)
      * TopicSnarf (CHANNEL_TOPIC_SNARF) -> TopicSnarf (lvlTopicSnarf)
    
    * Document the changes in ChanServ options.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-20

commit 81b3f3130352324f81efb7d12d6b43357d9fe205
Author: Entrope <entrope@clan-dk.org>
Date:   Mon Mar 1 16:23:51 2004 +0000

    giveownership fix; handle_join +ov "fix"; revert OSMSG_FLOOD_MODERATE
    
    * Fix !giveownership by staff.
    
    * If ChanServ gives ops to someone onjoin, do not also give them voice.
    
    * Translate OSMSG_FLOOD_MODERATE according to the channel options
    (well, hopefully in the future we will support that) rather than the
    join-flooding user's options.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-19

commit ce568e92568dfad1f60b4e8789c6653436c93c72
Author: Adam Loghry <adam@gamesurge.net>
Date:   Mon Mar 1 09:54:10 2004 +0000

    no error on inexistent commands done publicly, announcements setting display fix, two opserv chaninfo fixes, OSMSG_FLOOD_MODERATE now works when sent to channels, and hostmask lastquit searches
    
    
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-18

commit ccbbd3e64b5ceb65efca80f38f73d44c32391ee6
Author: Entrope <entrope@clan-dk.org>
Date:   Mon Mar 1 02:44:25 2004 +0000

    Minor fixes and improvements
    
    * Fix implementation of privileged-setter note types (it ignored the
    OpServ access level before).
    
    * Show proper message when an account's announcements are disabled.
    
    * Translate OSMSG_FLOOD_MODERATE when sending it to a channel.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-17

commit 137d67d824dafb50686ee0b02fb5dd8352323707
Author: Entrope <entrope@clan-dk.org>
Date:   Sun Feb 29 21:58:29 2004 +0000

    Fix possible crash in chanserv.c:handle_kick()
    
    * Delay looking up translation for CSMSG_USER_PROTECTED until we know
    the kicker actually exists (if a server does the KICK, kicker==NULL).
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-16

commit 160289d27334d05c1d1fa366a1b8da7e5997a450
Author: Entrope <entrope@clan-dk.org>
Date:   Sun Feb 29 14:47:51 2004 +0000

    Update .arch-inventory for in-tree builds; remove --disable-lame-tricks
    
    * Switch to using "backup" in .arch-inventory for generated sources
    and objects, since that is more accurate than "precious."
    
    * Add normal build output to .arch-inventory so normal builds do not
    cause tree-lint failures (e.g. during "tla update" - bad!).
    
    * Remove the "lame-tricks" option from configure.in since it was not
    used anyway.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-15

commit 0929048adf18ce02501f00d5772c86a35a7e4d47
Author: Zoot <zoot@gamesnet.net>
Date:   Sun Feb 29 08:07:37 2004 +0000

    Limit mode parameter count.
    
    Restrict the number of mode parameters sent by the P10 protocol
    backend to MAXMODEPARAMS.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-14

commit 3455f91a5a16c686548162602602e4e2dbc7d414
Author: Entrope <entrope@clan-dk.org>
Date:   Sun Feb 29 03:40:25 2004 +0000

    Privileged service fixes
    
    * Allow runtime control of privileged services.
    
    * Make all oper commands default to having flags +oper.
    
    * Add a "privileged" directive for OpServ in srvx.conf.example.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-13

commit 125f1883be3027aaa5796815a69d294181ec24f3
Author: Entrope <entrope@clan-dk.org>
Date:   Sat Feb 28 21:33:30 2004 +0000

    more bug fixes from GameSurge
    
    * Refuse to let an owner !set setters 501.
    
    * Report proper level range when using !trim users <duration>.
    
    * Refuse to let anyone !set <numericoption> 502, etc.
    
    * Refuse to let people below owner level !set <numericoption> above
    their level.
    
    * Make !d 1d6+5 work.
    
    * Mark users as seen/present AFTER deciding whether to show their
    infoline, and PRIVMSG infolines rather than NOTICE them.
    
    * Translate "CSMSG_USER_PROTECTED" (kick protection enforcement
    message).
    
    * Enforce plain mode changes, not just ops/deops/bans etc.
    
    * Fix documentation for ChanServ UNREGISTER command.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-12

commit 6fd724b59fc22752e2edc56cd424c9aaa7f0614f
Author: Entrope <entrope@clan-dk.org>
Date:   Sat Feb 28 19:08:13 2004 +0000

    Fix bugs found on GameSurge
    
    * Remove unused ARCH_REVISION macro in Makefile.am
    
    * Fix !trim <userlevel> <duration> (so it does not trim ALL users)
    
    * Properly allow owners to set levels to 501
    
    * Set "deopped" when we deop the person who changed modes
    
    * Mark the first user in a channel as a chanop (fixes a spurious
      HACK(4) for newly registered channels).
    
    * Document user level ranges for the TRIM command.
    
    * Document user-level-based SET options as being such (rather than
    being multiple-choice options).
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-11

commit 17314f6e4bfd8310885874872c523e984a1c7d3a
Author: Zoot <zoot@gamesnet.net>
Date:   Sat Feb 28 18:46:03 2004 +0000

    reply correctly to bad bans
    
    Send the correct ban being bounced.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-10

commit 9064028f8a187f0cfa0bb61e07750c641193307c
Author: Entrope <entrope@clan-dk.org>
Date:   Sat Feb 28 04:31:12 2004 +0000

    put back Make rule for arch-version.h
    
    * Reinstate the rule to create arch-version.h, which I accidentally
    deleted in the last commit
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-9

commit a4b56cbe87316262b8c6508d95b518242e145eda
Author: Entrope <entrope@clan-dk.org>
Date:   Sat Feb 28 00:29:08 2004 +0000

    runtime helpfile splicing
    
    * Add a miniature parser to the helpfile reader, allowing
    nickserv.help's subsections to be selected at runtime.
    
    * Move nickserv.help.m4 to nickserv.help and rewrite the
    selection code to use the above.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-8

commit 3dd953d52c74216c80128a8ea99feb5cb829bdda
Author: Entrope <entrope@clan-dk.org>
Date:   Fri Feb 27 16:31:57 2004 +0000

    fix userlist presence tracking; "version" command on all services
    
    * Change scan_handle_presence() to scan_user_presence(), since we always
      have the userData* at the caller site.
    
    * Make handle_auth() respect user suspensions.
    
    * In handle_part(), let scan_user_presence() update "seen" time.
    
    * Make ChanServ adduser command take arguments in the "expected" order
      ("!adduser target level", not "!adduser level target")
    
    * Add the "version" command to all built-in services
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-7

commit 47e1901a4373ed84d8be389bd61fc1e86ff8eb93
Author: Entrope <entrope@clan-dk.org>
Date:   Wed Feb 25 04:06:30 2004 +0000

    ChanServ, OpServ and main.c bug fixes
    
    * Read new-style channel flags from the correct field, and do not make
    ChanServ rejoin channels that are still suspended
    
    * Allow service nicknames to be omitted from srvx.conf (again)
    
    * Construct "opserv" bot earlier so that database read works correctly
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-6

commit 1f1089044beb255b81e47dd6b1da401980f8bdbc
Author: Entrope <entrope@clan-dk.org>
Date:   Tue Feb 24 03:55:22 2004 +0000

    fix TODO list, services without "description" fields
    
    Remove items in the TODO list that have been done
    
    Restore the ability to use a default description for services when a
    "nick" but no "description" is present in srvx.conf
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-5

commit d5ae9a202fd452e402b36f33b7c4c580069c609c
Author: Entrope <entrope@clan-dk.org>
Date:   Fri Feb 20 19:29:46 2004 +0000

    Fix zoot style [wcmop]list; tweak events access
    
    Use proper lower bound for zoot style user-level lists.
    
    Change default "events" access to 350.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-4

commit 168862b75b19d0cae21b0729181bbf72905715da
Author: Entrope <entrope@clan-dk.org>
Date:   Thu Feb 19 22:36:42 2004 +0000

    cleanups and fixes
    
    Fix the response when trying to set an option to an invalid access level.
    
    Put accurate headers on zoot_list !users output.
    
    Reduce default addban/addtimedban/delban access levels to 250.
    
    Add advertising/support plug for #srvx.
    
    Handle (but report) IRC socket connection errors.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-3

commit 927163b4f317f9afdf0a46b89d71364e0365c2c1
Author: Entrope <entrope@clan-dk.org>
Date:   Wed Feb 18 00:18:30 2004 +0000

    Support topic bursts; fix topic display in CHANINFO command
    
    When we wipe out an older channel on our end, clear its topic.
    
    Fix the message send function used by CHANINFO.
    
    When we get a P10 T message, check for the extra fields added in Asuka.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-2

commit 048ec278226648cf6b3005170566fcd12e670996
Author: Entrope <entrope@clan-dk.org>
Date:   Tue Feb 17 22:02:03 2004 +0000

    Indenting cleanups, +sp fix, PING fix
    
    Add explicit copyright notice to VERSION command
    When receiving a PING, respond using numnick instead of readable name
    Indenting fixes
    Remove out-of-date references to GamesNET
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-1

commit 373aab7034a262b27f65cd8121c94e1b17db8ea3
Author: Entrope <entrope@clan-dk.org>
Date:   Wed Feb 11 04:12:26 2004 +0000

    Initial import (again)
    
    Initial import of srvx-1.3 code.
    git-archimport-id: srvx@srvx.net--2004-srvx/srvx--devo--1.3--base-0
